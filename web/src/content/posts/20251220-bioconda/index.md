---
title: Biocondaã¸ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç™»éŒ²æ‰‹é † (2025å¹´ç‰ˆ)
published: 2025-12-20
tags: [Python, Bioconda, ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç™»éŒ²]
category: æŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
draft: false
---

# æ¦‚è¦

æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€PyPIã«å…¬é–‹æ¸ˆã¿ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’Biocondaã«é€£æºã•ã›ã‚‹æ‰‹é †ã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚  

è‡ªä½œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸[TSUMUGI](https://github.com/akikuno/TSUMUGI-dev)ã‚’Biocondaã«ç™»éŒ²ã—ãŸéš›ã®å…·ä½“ä¾‹ã‚’äº¤ãˆãªãŒã‚‰èª¬æ˜ã—ã¾ã™ã€‚


>[!NOTE]
> PyPIã¸ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å…¬é–‹æ‰‹é †ã«ã¤ã„ã¦ã¯ã€åˆ¥ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€Œ[PyPIã¸ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å…¬é–‹æ‰‹é † (2025å¹´ç‰ˆ)](https://akikuno.github.io/paper-reading/posts/20251214-pypi/)ã€ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

# å‰ææ¡ä»¶

- GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’æŒã£ã¦ã„ã‚‹ã“ã¨
- PyPIã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã“ã¨

# Biocondaã®ä»•çµ„ã¿

Biocondaã§ã¯ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã”ã¨ã«ã€Œãƒ¬ã‚·ãƒ”ã€ã¨å‘¼ã°ã‚Œã‚‹YAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’bioconda-recipesãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã—ã¦ã„ã¾ã™ï¼ˆhttps://github.com/bioconda/bioconda-recipesï¼‰ã€‚  
ã“ã®YAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç™»éŒ²ã™ã‚‹ã“ã¨ã§ã€Biocondaãƒãƒ£ãƒ³ãƒãƒ«ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå…¬é–‹ã•ã‚Œã¾ã™ã€‚  

# ç™»éŒ²ã®æµã‚Œ

1. GitHubä¸Šã§bioconda-recipesã‚’forkã—ã¾ã™ã€‚  
2. forkã—ãŸãƒªãƒã‚¸ãƒˆãƒªã‚’cloneã—ã¾ã™ã€‚  
3. recipes/<ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚Šã€meta.yamlã‚’é…ç½®ã—ã¾ã™ã€‚  
4. Pull Requestã‚’ä½œæˆã—ã¾ã™ã€‚  
5. è‡ªå‹•ãƒ†ã‚¹ãƒˆé€šéå¾Œã«`@BiocondaBot please add label`ã¨ã‚³ãƒ¡ãƒ³ãƒˆã—ã¾ã™ã€‚
6. æœ‰å¿—ã®æ–¹ãŒæœ€çµ‚ãƒã‚§ãƒƒã‚¯ã—ã€å•é¡ŒãŒãªã‘ã‚Œã°ãƒãƒ¼ã‚¸ã•ã‚Œã¾ã™
7. Biocondaãƒãƒ£ãƒ³ãƒãƒ«ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå…¬é–‹ã•ã‚Œã¾ã™ğŸŠ

# ç™»éŒ²æ‰‹é †

## 1. å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Biocondaã§ã®ä½œæ¥­ã«å¿…è¦ãªCLIï¼ˆgitã€ghã€grayskullï¼‰ã‚’conda-forgeçµŒç”±ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```bash
conda install -c conda-forge git gh grayskull
```

ghã¯GitHub CLIãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã™ã€‚

```bash
gh auth login
```

## 2. bioconda-recipesã®forkã¨clone

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§bioconda-recipesã‚’forkã—ã€å¿…è¦ã«å¿œã˜ã¦cloneã¾ãŸã¯åŒæœŸã—ã¾ã™ã€‚

```bash
# ã‚‚ã—æ—¢ã«forkã—ã¦ã„ã‚‹å ´åˆã¯ã€æœ€æ–°çŠ¶æ…‹ã«åŒæœŸã—ã¾ã™
gh repo sync akikuno/bioconda-recipes -b master ||
    gh repo fork bioconda/bioconda-recipes

# ã‚‚ã—cloneã—ã¦ã„ãªã„å ´åˆã¯cloneã—ã¾ã™
if ! [ -f bioconda-recipes/README.md ] ; then
    git clone https://github.com/akikuno/bioconda-recipes.git

# ã‚‚ã—cloneæ¸ˆã¿ã®å ´åˆã¯ã€æœ€æ–°çŠ¶æ…‹ã«åŒæœŸã—ã¾ã™
else
    (cd bioconda-recipes && git remote add upstream https://github.com/bioconda/bioconda-recipes.git)
    (cd bioconda-recipes && git switch master && git fetch upstream && git merge upstream/master)
fi
```

>[!NOTE]
> ã‚³ãƒãƒ³ãƒ‰åã®`akikuno`ã¯è‡ªåˆ†ã®GitHubãƒ¦ãƒ¼ã‚¶ãƒ¼åã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚

## 3. grayskullã§meta.yamlã‚’ç”Ÿæˆ

```bash
mkdir -p metayaml
(cd metayaml && grayskull pypi TSUMUGI)
```

ä¸Šè¨˜ã«ã‚ˆã‚Šã€`metayaml/TSUMUGI/meta.yaml`ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚

## 4. meta.yamlã®ä¿®æ­£

ç”Ÿæˆã•ã‚ŒãŸmeta.yamlã«ã€Biocondaã¸ã®ç™»éŒ²ã«å¿…è¦ãªä»¥ä¸‹ã®2ç‚¹ã‚’è¿½è¨˜ã—ã¾ã™ã€‚  

- `build`ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«`run_exports`ã‚’è¿½åŠ ã—ã¾ã™ã€‚
- `about`ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«`home`ã€`dev_url`, `doc_url`ã‚’è¿½åŠ ã—ã¾ã™ã€‚

:::important
`run_exports`ã¨`home`ã¯è¨˜è¼‰ãŒãªã„ã¨ãƒªãƒ³ãƒˆãŒé€šã‚‰ãªã„ãŸã‚å¿…é ˆã§ã™ã€‚  
`dev_url`, `doc_url`ã¯åˆ¥ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§æŒ‡æ‘˜ã•ã‚ŒãŸãŸã‚ã€è¿½è¨˜ã‚’æ¨å¥¨ã—ã¾ã™ã€‚  
:::

>[!NOTE]
> run_exportsã¯ã€Biocondaãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒåˆ©ç”¨ã™ã‚‹ã¨ãã«è¨±å®¹ã•ã‚Œã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¯„å›²ã‚’ç¤ºã—ã¾ã™ã€‚  
> æŒ‡å®šã™ã‚‹ã¨ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å´ã§å®‰å…¨ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¯„å›²ãŒè‡ªå‹•çš„ã«è¨­å®šã•ã‚Œã€äº’æ›æ€§ã®å•é¡Œã‚’é˜²ã’ã¾ã™ã€‚  
> ä¾‹ãˆã°`{{ pin_subpackage('tsumugi', max_pin="x.x") }}`ãªã‚‰ã€0.5.0â†’0.5.1ã®ã‚ˆã†ãªãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°ã¯è¨±å®¹ã•ã‚Œã¾ã™ãŒã€0.5.0â†’0.6.0ã®ã‚ˆã†ãªãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°ã¯è¨±å®¹ã•ã‚Œã¾ã›ã‚“ã€‚  
> å®‰å®šç‰ˆ(1.0.0)å‰ã¯ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ç ´å£Šçš„å¤‰æ›´ãŒå…¥ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ãŸã‚ã€`max_pin="x.x"`ã‚’æ¨å¥¨ã—ã¾ã™ã€‚  


[æœ€çµ‚çš„ãªmeta.yaml](https://github.com/bioconda/bioconda-recipes/pull/60893/files)ã¯ã€ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ï¼š

```yaml

{% set name = "TSUMUGI" %}
{% set version = "0.5.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.org/packages/source/{{ name[0] }}/{{ name }}/tsumugi-{{ version }}.tar.gz
  sha256: b3b3a8e0acb8a0f4326e45aabb10d7d3b9e0f0cd432ef0cc49f3d61aeae04350

build:
  entry_points:
    - tsumugi = TSUMUGI.main:main
  noarch: python
  script: {{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  number: 0
  run_exports:
    - {{ pin_subpackage('tsumugi', max_pin="x.x") }}

requirements:
  host:
    - python >=3.10
    - poetry-core
    - pip
  run:
    - python >=3.10
    - numpy >=1.21.0
    - tqdm >=4.64.0
    - networkx >=3.3

test:
  imports:
    - TSUMUGI
  commands:
    - pip check
    - tsumugi --help
  requires:
    - pip

about:
  summary: 'TSUMUGI: Phenotype-driven gene network identifier'
  license: MIT
  license_file: LICENSE
  home: "https://github.com/akikuno/tsumugi"
  dev_url: "https://github.com/akikuno/tsumugi"
  doc_url: "https://github.com/akikuno/tsumugi/blob/{{ version }}/README.md"


extra:
  recipe-maintainers:
    - akikuno

```

## 5. meta.yamlã®é…ç½®

ç”Ÿæˆã—ãŸmeta.yamlã‚’ã€bioconda-recipesã®`recipes/tsumugi/meta.yaml`ã¨ã—ã¦é…ç½®ã—ã¾ã™ã€‚

```bash
mkdir -p bioconda-recipes/recipes/tsumugi
cp metayaml/TSUMUGI/meta.yaml bioconda-recipes/recipes/tsumugi/meta.yaml
```

## 6. Pull Requestã®ä½œæˆ

ä½œæˆã—ãŸmeta.yamlã‚’ã‚³ãƒŸãƒƒãƒˆã—ã¾ã™ã€‚  

ä»®ã«ãƒ–ãƒ©ãƒ³ãƒåã‚’`add-tsumugi-0.5.0`ã¨ã—ãŸå ´åˆã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```bash
git checkout -b add-tsumugi-0.5.0
git add recipes/tsumugi/meta.yaml
git commit -m "Add TSUMUGI version 0.5.0"
git push origin add-tsumugi-0.5.0
```

ä»¥ä¸‹ã®URLã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€Pull Requestã‚’ä½œæˆã—ã¾ã™ã€‚

https://github.com/<ãƒ¦ãƒ¼ã‚¶ãƒ¼å>/bioconda-recipes/pull/new/<ãƒ–ãƒ©ãƒ³ãƒå>

ã“ã‚Œã§bioconda-recipesãƒªãƒã‚¸ãƒˆãƒªã«å¯¾ã—ã¦Pull RequestãŒä½œæˆã•ã‚Œã¾ã™ã€‚


## 7. è‡ªå‹•ãƒ†ã‚¹ãƒˆã¨ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³

Pull Requestã‚’ä½œæˆã™ã‚‹ã¨ã€è‡ªå‹•ãƒ†ã‚¹ãƒˆãŒèµ°ã‚Šã¾ã™ã€‚
è‡ªå‹•ãƒ†ã‚¹ãƒˆãŒé€šéã—ãŸã‚‰ã€ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ã«

`@BiocondaBot please add label`

ã¨ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã—ã¾ã™ã€‚

:::important
`@BiocondaBot please add label`ã‚’å¿˜ã‚Œã‚‹ã¨æ°¸é ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã‚Œã¾ã›ã‚“ï¼ˆæ•°æ•—ï¼‰ã€‚  
å¿…ãšã‚³ãƒ¡ãƒ³ãƒˆã—ã¦ãã ã•ã„ã€‚
:::


## 8. ãƒãƒ¼ã‚¸ã¨å…¬é–‹

æœ‰å¿—ã®æ–¹ãŒæœ€çµ‚ãƒã‚§ãƒƒã‚¯ã—ã€å•é¡ŒãŒãªã‘ã‚Œã°ãƒãƒ¼ã‚¸ã•ã‚Œã¾ã™ã€‚  

:::important
ã“ã®æœ€çµ‚ãƒã‚§ãƒƒã‚¯ã¯ãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢ã®æ–¹ãŒè¡Œã£ã¦ã„ã‚‹ãŸã‚ã€ãƒã‚§ãƒƒã‚¯ã¾ã§ã«æ•°æ—¥ãŒã‹ã‹ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚  
æ„Ÿè¬ã®æ°—æŒã¡ã§ãŠå¾…ã¡ãã ã•ã„ğŸ™
:::

ãƒãƒ¼ã‚¸ã•ã‚Œã‚‹ã¨ã€æ•°åˆ†ã§Biocondaã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå…¬é–‹ã•ã‚Œã¾ã™ã€‚


>[!NOTE]
> ä»¥é™ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°ã¯PyPIã®æ›´æ–°ã«è‡ªå‹•ã§è¿½å¾“ã—ã¾ã™ã€‚
